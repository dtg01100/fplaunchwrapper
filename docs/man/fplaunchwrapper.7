.TH FPLAUNCHWRAPPER 7 "December 2024" "fplaunchwrapper 1.3" "Miscellaneous"
.SH NAME
fplaunchwrapper \- modern Python-based Flatpak wrapper management
.SH DESCRIPTION
.B fplaunchwrapper
is a modern Python-based suite of tools that automatically generates and manages
intelligent wrapper scripts for Flatpak applications, allowing you to launch them
as if they were native system commands with automatic preference resolution.
.PP
Flatpak applications are typically invoked with
.B flatpak run <application-id>
which can be cumbersome for daily use. This package creates smart wrapper
scripts that allow you to type just the application name (e.g.,
.B firefox
instead of
.BR "flatpak run org.mozilla.firefox" )
and automatically choose between system packages and Flatpak versions.
.SH COMPONENTS
.TP
.BR fplaunch (1)
Main CLI command with subcommands for all operations.
.TP
.BR fplaunch-cli (1)
Rich CLI interface for wrapper management with beautiful formatting.
.TP
.BR fplaunch-generate (1)
Generate wrapper scripts for installed Flatpak applications.
.TP
.BR fplaunch-manage (1)
Direct wrapper management (list, preferences, removal).
.TP
.BR fplaunch-launch (1)
Direct application launching with wrapper logic.
.TP
.BR fplaunch-setup-systemd (1)
Configure automatic wrapper regeneration with systemd/cron.
.TP
.BR fplaunch-cleanup (1)
Safely remove all fplaunchwrapper artifacts.
.SH FEATURES
.SS Intelligent Wrapper Generation
Automatically scans Flatpak applications and creates smart wrapper scripts with
conflict resolution and preference management.
.SS Modern CLI with Rich Formatting
Beautiful terminal interface with progress bars, tables, and interactive prompts.
.SS TOML Configuration
Human-readable configuration with type safety and validation.
.SS Real-time Monitoring
Automatic wrapper regeneration when Flatpak apps are installed or removed.
.SS Security Hardened
Input validation, injection prevention, and secure file operations.
.SS Cross-platform Support
Works on Linux, macOS, and Windows with proper path handling.
.SS Comprehensive Testing
Full test suite with security verification and CI/CD integration.
.SH WORKFLOW
.SS Quick Start
.IP 1. 3
Install with uv:
.B uv tool install fplaunchwrapper
.IP 2. 3
Generate wrappers:
.B fplaunch-cli generate ~/bin
.IP 3. 3
Launch apps by name:
.B firefox\fR, \fBvlc\fR, etc.
.IP 4. 3
Set up monitoring:
.B fplaunch-setup-systemd
.SS Daily Usage
.IP \(bu 3
Launch Flatpak apps as native commands
.IP \(bu 3
Use
.B fplaunch-cli
for management with rich interface
.IP \(bu 3
Automatic preference resolution between system/Flatpak
.IP \(bu 3
Real-time monitoring for app changes (if enabled)
.IP \(bu 3
TOML configuration with validation
.SS Configuration Management
.IP \(bu 3
Edit
.I ~/.config/fplaunchwrapper/config.toml
.IP \(bu 3
Use
.B fplaunch-cli config
to view current settings
.IP \(bu 3
Set app preferences with
.B fplaunch-cli set-pref
.SS Cleanup and Removal
.IP 1. 3
Safe cleanup:
.B fplaunch-cleanup --dry-run
.IP 2. 3
Remove everything:
.B fplaunch-cleanup --yes
.IP 3. 3
Uninstall:
.B uv tool uninstall fplaunchwrapper
.SH CONFIGURATION
Configuration is stored in TOML format:
.PP
.I ~/.config/fplaunchwrapper/config.toml
.PP
Example configuration:
.PP
.nf
# Global preferences
[global_preferences]
launch_method = "auto"
env_vars = { "LANG" = "en_US.UTF-8" }

# App-specific preferences
[app_preferences.firefox]
launch_method = "flatpak"
custom_args = ["--new-window"]

[app_preferences.chrome]
launch_method = "system"
.fi
.SH IMPLEMENTATION
.B fplaunchwrapper
is implemented in Python using modern libraries:
.TP
.B Click
Command-line interface framework
.TP
.B Rich
Beautiful terminal formatting
.TP
.B Pydantic
Type-safe configuration validation
.TP
.B TOML
Human-readable configuration format
.TP
.B Watchdog
Real-time file system monitoring
.TP
.B Pathlib
Cross-platform path handling
.PP
This directory contains:
.IP \(bu 3
.I bin_dir
- Path to wrapper script directory
.IP \(bu 3
.I blocklist
- Blocked Flatpak application IDs
.IP \(bu 3
.I aliases
- Alias definitions
.IP \(bu 3
.I *.pref
- Per-application preferences
.IP \(bu 3
.I *.env
- Per-application environment variables
.IP \(bu 3
.I scripts/pre/
- Pre-launch scripts
.IP \(bu 3
.I scripts/post/
- Post-run scripts
.SH WRAPPER SCRIPT BEHAVIOR
Generated wrapper scripts:
.IP 1. 3
Check if a system native command exists with the same name
.IP 2. 3
Respect the preference setting (system vs. flatpak)
.IP 3. 3
Load environment variables from configuration
.IP 4. 3
Execute pre-launch script if configured
.IP 5. 3
Run the Flatpak application with passed arguments
.IP 6. 3
Execute post-run script if configured
.SH SECURITY CONSIDERATIONS
.SS Script Generation
Wrapper scripts are regenerated from templates and should not be manually
edited. The regeneration process ensures they stay in sync with the installed
Flatpak applications.
.SS Tar Extraction Safety
Export/import operations use tar but include path traversal protections to
prevent malicious archives from writing outside the intended directory.
.SS User Consent
Systemd units and cron jobs are only created when the user explicitly runs
.BR fplaunch-setup-systemd .
Package installation never automatically modifies user configuration.
.SH EXAMPLES
.TP
Generate initial wrappers:
.B fplaunch-manage regenerate
.TP
List all available wrappers:
.B fplaunch-manage list
.TP
Prefer system Firefox over Flatpak version:
.B fplaunch-manage set-pref firefox system
.TP
Set environment variable for an app:
.B fplaunch-manage set-env firefox MOZ_ENABLE_WAYLAND 1
.TP
Create an alias:
.B fplaunch-manage set-alias org.mozilla.firefox ff
.TP
Enable automatic updates:
.B fplaunch-setup-systemd
.TP
Export configuration for backup:
.B fplaunch-manage export-config ~/fplaunch-backup.tar.gz
.TP
Clean up before uninstalling:
.B fplaunch-cleanup --yes
.SH FILES
.TP
.I /usr/lib/fplaunchwrapper/
System installation directory (package install)
.TP
.I /usr/bin/fplaunch-*
User-facing command symlinks (package install)
.TP
.I ~/.local/bin/
Default wrapper script directory
.TP
.I ~/.config/flatpak-wrappers/
User configuration directory
.TP
.I ~/.bashrc.d/fplaunch_completion.bash
Bash completion script
.TP
.I ~/.config/systemd/user/flatpak-wrappers.*
Systemd user units (if enabled)
.SH ENVIRONMENT
.TP
.B XDG_CONFIG_HOME
If set, configuration uses \fI$XDG_CONFIG_HOME/flatpak-wrappers\fR instead
of \fI~/.config/flatpak-wrappers\fR.
.TP
.B CI
When set, install.sh runs in non-interactive mode and skips auto-update setup.
.SH SEE ALSO
.BR fplaunch-manage (1),
.BR fplaunch-generate (1),
.BR fplaunch-setup-systemd (1),
.BR fplaunch-cleanup (1),
.BR flatpak (1)
.PP
Full documentation:
.I /usr/share/doc/fplaunchwrapper/
(if installed via package)
.SH AUTHOR
Written by the fplaunchwrapper contributors.
.SH BUGS
Report bugs at: https://github.com/dtg01100/fplaunchwrapper/issues
