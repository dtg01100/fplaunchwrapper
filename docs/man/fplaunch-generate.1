.TH FPLAUNCH-GENERATE 1 "December 2024" "fplaunchwrapper 1.3" "User Commands"
.SH NAME
fplaunch-generate \- generate wrapper scripts for installed Flatpak applications
.SH SYNOPSIS
.B fplaunch-generate
.RI [OPTIONS] [bin_dir]
.SH DESCRIPTION
.B fplaunch-generate
automatically creates intelligent wrapper scripts for all installed Flatpak applications.
These wrappers allow you to launch Flatpak applications using simple commands
from your shell, as if they were native system commands, with automatic preference
resolution between system packages and Flatpak versions.
.PP
The command scans both user and system-wide Flatpak installations, generates
appropriate wrapper scripts, and performs cleanup of wrappers for applications
that have been uninstalled. It provides rich progress reporting and error handling.
.SH OPTIONS
.TP
.B -h, --help
Show help message and exit.
.TP
.B -v, --verbose
Enable verbose output with detailed progress information.
.TP
.B --force
Force regeneration of all wrappers, even if they already exist.
.TP
.I bin_dir
Optional directory path where wrapper scripts should be created. If not specified,
defaults to \fI~/bin\fR. The chosen directory is saved to the configuration
and used for subsequent regenerations.
.SH BEHAVIOR
.SS Wrapper Generation
For each installed Flatpak application:
.IP \(bu 3
Extracts the application name from the Flatpak ID (e.g., "firefox" from
"org.mozilla.Firefox")
.IP \(bu 3
Checks for name collisions with existing commands
.IP \(bu 3
Respects the blocklist (see
.BR fplaunch-manage (1))
.IP \(bu 3
Creates an executable wrapper script with proper metadata
.IP \(bu 3
Applies any configured preferences (system vs. flatpak)
.IP \(bu 3
Loads environment variables and pre/post-launch scripts
.SS Cleanup
.IP \(bu 3
Identifies wrappers for uninstalled Flatpak applications
.IP \(bu 3
Removes obsolete wrapper scripts
.IP \(bu 3
Cleans up associated preference files
.IP \(bu 3
Removes orphaned alias symlinks
.SS Name Collision Handling
When multiple Flatpak applications generate the same wrapper name:
.IP \(bu 3
The first application claims the base name
.IP \(bu 3
Subsequent applications get alternate names (e.g., "code2", "code3")
.IP \(bu 3
Collision information is logged
.SH FILES
.TP
.I ~/.config/flatpak-wrappers/bin_dir
Stores the configured wrapper directory path.
.TP
.I ~/.config/flatpak-wrappers/blocklist
Applications listed here will not have wrappers generated.
.TP
.I ~/.config/flatpak-wrappers/*.pref
Preference files that control wrapper behavior.
.TP
.I ~/.config/flatpak-wrappers/*.env
Environment variable configurations for wrappers.
.TP
.I ~/.config/flatpak-wrappers/scripts/pre/*.sh
Pre-launch scripts executed before running the wrapper.
.TP
.I ~/.config/flatpak-wrappers/scripts/post/*.sh
Post-run scripts executed after the wrapper completes.
.SH WRAPPER SCRIPT FORMAT
Generated wrapper scripts include:
.IP \(bu 3
Header comment identifying them as generated by fplaunchwrapper
.IP \(bu 3
Flatpak application ID
.IP \(bu 3
Logic to check for system command preference
.IP \(bu 3
Environment variable loading
.IP \(bu 3
Pre-launch script execution
.IP \(bu 3
Flatpak run command with argument forwarding
.IP \(bu 3
Post-run script execution
.SH EXAMPLES
.TP
Generate wrappers in the default directory:
.B fplaunch-generate
.TP
Generate wrappers in a custom directory:
.B fplaunch-generate ~/my-scripts
.TP
Regenerate after installing new Flatpak apps:
.B fplaunch-manage regenerate
.SH ENVIRONMENT
.TP
.B XDG_CONFIG_HOME
If set, configuration is read from \fI$XDG_CONFIG_HOME/flatpak-wrappers\fR.
.SH EXIT STATUS
.TP
.B 0
Success
.TP
.B 1
Flatpak not installed or command failed
.SH NOTES
This script is typically run automatically via
.BR fplaunch-setup-systemd (1)
when Flatpak applications are installed or updated. Manual execution is useful
for testing or troubleshooting.
.PP
Wrapper scripts are identified by a header marker comment and should not be
manually edited as they will be regenerated.
.SH SEE ALSO
.BR fplaunch-manage (1),
.BR fplaunch-setup-systemd (1),
.BR flatpak (1)
.SH AUTHOR
Written by the fplaunchwrapper contributors.
.SH BUGS
Report bugs at: https://github.com/dtg01100/fplaunchwrapper/issues
